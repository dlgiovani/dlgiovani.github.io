---
import { Image } from "astro:assets";
import "../css/erable.css";
interface Props {
    title: string;
}

const { title } = Astro.props;
---

<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <meta name="viewport" content="width=device-width" />
        <meta name="generator" content={Astro.generator} />
        <title>{title}</title>
    </head>
    <body>
        <nav>
            <Image loading="eager" src="/icon-48.png" alt="Giovani" width="32" height="32" />
            <ul>
                <li>
                    <a href="/"> Home </a>
                </li>
                <li>
                    <a href="/blog"> Blog </a>
                </li>
                <li>
                    <a href="/#about"> About </a>
                </li>
            </ul>
        </nav>

        <main>
            <slot />
        </main>

        <footer>
            <hr />
            <section>
                <h2>Giovani's Pages</h2>
                <figure>
                    <svg viewBox="-50 -50 100 100" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="0" cy="0" r="45" fill="none" stroke="currentColor" stroke-width="2"></circle>
                        <line
                            id="hour-hand"
                            x1="0"
                            y1="0"
                            x2="0"
                            y2="-25"
                            stroke="currentColor"
                            stroke-width="3"
                            stroke-linecap="round"></line>
                        <line
                            id="minute-hand"
                            x1="0"
                            y1="0"
                            x2="0"
                            y2="-35"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"></line>
                    </svg>
                    <figcaption>
                        <time id="digital-time">00:00</time>
                        <span>in Curitiba, Brazil</span>
                    </figcaption>
                </figure>
            </section>
            <section>
                <p>&copy; 2025 dlgiovani, made with ðŸ§ </p>
                <p>
                    Source code
                    <a
                        href="https://github.com/dlgiovani/dlgiovani.github.io/"
                        target="_blank"
                        rel="noopener noreferrer"
                    >
                        available on GitHub
                    </a>
                </p>
            </section>
        </footer>
    </body>
</html>
<script>
    function updateClock() {
        const now = new Date();
        const curitibaTime = new Date(now.toLocaleString("en-US", { timeZone: "America/Sao_Paulo" }));

        const hours = curitibaTime.getHours();
        const minutes = curitibaTime.getMinutes();
        const seconds = curitibaTime.getSeconds();

        // Calculate angles (0 degrees is at 12 o'clock)
        const minuteAngle = (minutes + seconds / 60) * 6; // 360 / 60 = 6 degrees per minute
        const hourAngle = ((hours % 12) + minutes / 60) * 30; // 360 / 12 = 30 degrees per hour

        // Update clock hands
        const hourHand = document.getElementById("hour-hand");
        const minuteHand = document.getElementById("minute-hand");

        if (hourHand) hourHand.setAttribute("transform", `rotate(${hourAngle})`);
        if (minuteHand) minuteHand.setAttribute("transform", `rotate(${minuteAngle})`);

        // Update digital time display
        const digitalTime = document.getElementById("digital-time");
        if (digitalTime) {
            const timeString = `${hours.toString().padStart(2, "0")}:${minutes.toString().padStart(2, "0")}`;
            digitalTime.textContent = timeString;
        }
    }

    // Update immediately and then every second
    updateClock();
    setInterval(updateClock, 1000);
</script>
